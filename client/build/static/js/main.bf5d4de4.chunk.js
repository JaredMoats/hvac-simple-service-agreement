(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,a,t){e.exports=t(65)},65:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(30),s=t.n(r),c=t(31),o=t(32),i=t(36),m=t(33),u=t(37),d=t(2),p=t(10),h=t(8),b=t.n(h),E=t(12),N=t(7),f=t(13),v=t(9),g=t(11),k=t.n(g),y=function(e){var a=e.storeToken,t=e.getToken,r=(e.setActiveUser,Object(n.useState)({firstName:"",lastName:"",email:"",companyName:"",password:"",password2:"",role:"",selectedOption:""})),s=Object(v.a)(r,2),c=s[0],o=s[1],i=Object(n.useState)({toLogin:!1}),m=Object(v.a)(i,2),u=m[0],h=m[1],g=c.firstName,y=c.lastName,x=c.email,C=c.companyName,w=c.password,O=c.password2,S=c.role,j=c.selectedOption,T=u.toLogin,P=function(e){var a;o(Object(f.a)({},c,(a={},Object(N.a)(a,e.target.name,e.target.value),Object(N.a)(a,"selectedOption",e.target.value),a)))},A=function(){var e=Object(E.a)(b.a.mark(function e(n){var l,r,s;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),w===O){e.next=5;break}alert("Passwords do not match"),e.next=23;break;case 5:return l={headers:{"Content-Type":"application/json"}},r=JSON.stringify({firstName:g,lastName:y,companyName:C,email:x,password:w,role:S}),console.log("JSON form data: "+r),e.prev=8,e.next=11,k.a.post("/api/employees",r,l);case 11:s=e.sent,a(s.data.token),t(),console.log("Token set in headers object"),console.log("toDashboard: "+T),h({toLogin:!0}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),console.log(e.t0.response.data);case 23:case"end":return e.stop()}},e,null,[[8,20]])}));return function(a){return e.apply(this,arguments)}}();return T?l.a.createElement(p.a,{to:"/login"}):l.a.createElement(n.Fragment,null,l.a.createElement("h1",{className:"has-text-black",style:{fontSize:"40px"}},"Welcome to Simple Service Agreement"),l.a.createElement("h2",{className:"has-text-black",style:{fontSize:"20px"}},"Register or ",l.a.createElement(d.b,{to:"/login"},"Login")),l.a.createElement("div",{className:"card"},l.a.createElement("form",{onSubmit:function(e){return A(e)}},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"First Name"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"First Name",name:"firstName",value:g,onChange:function(e){return P(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Last Name"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Last Name",name:"lastName",value:y,onChange:function(e){return P(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Company Name"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Company Name",name:"companyName",value:C,onChange:function(e){return P(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Email",name:"email",value:x,onChange:function(e){return P(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password",value:w,onChange:function(e){return P(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Confirm Password"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"password",placeholder:"Confirm Password",name:"password2",value:O,onChange:function(e){return P(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"radio"},"Technician",l.a.createElement("input",{type:"radio",name:"role",value:"technician",checked:"technician"===j,onChange:function(e){return P(e)}})),l.a.createElement("label",{className:"radio"},"Dispatcher",l.a.createElement("input",{type:"radio",name:"role",value:"dispatcher",checked:"dispatcher"===j,onChange:function(e){return P(e)}})),l.a.createElement("label",{className:"radio"},"Dealer",l.a.createElement("input",{type:"radio",name:"role",value:"dealer",checked:"dealer"===j,onChange:function(e){return P(e)}}))),l.a.createElement("input",{type:"submit",className:"button is-success"}))))},x=function(e){var a=e.storeToken,t=e.getToken,r=e.setActiveUser,s=Object(n.useState)({email:"",password:""}),c=Object(v.a)(s,2),o=c[0],i=c[1],m=Object(n.useState)({toDashboard:!1}),u=Object(v.a)(m,2),h=u[0],g=u[1],y=o.email,x=o.password,C=h.toDashboard,w={fontSize:"20px"},O=function(e){i(Object(f.a)({},o,Object(N.a)({},e.target.name,e.target.value)))},S=function(){var e=Object(E.a)(b.a.mark(function e(n){var l,s,c,o,i,m;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),l={headers:{"Content-Type":"application/json"}},s=JSON.stringify({email:y,password:x}),e.prev=7,e.next=10,k.a.post("/api/auth",s,l);case 10:return c=e.sent,a(c.data.token),o=t(),i={"x-auth-token":o},e.next=16,k.a.get("/api/employees/me",{headers:i});case 16:m=e.sent,r(m),g({toDashboard:!0}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(7),console.log(e.t0.message);case 24:case"end":return e.stop()}},e,null,[[7,21]])}));return function(a){return e.apply(this,arguments)}}();return C?l.a.createElement(p.a,{to:"/dashboard"}):l.a.createElement(n.Fragment,null,l.a.createElement("h1",{className:"has-text-black",style:{fontSize:"40px"}},"Welcome to Simple Service Agreement"),l.a.createElement("h2",{className:"has-text-black",style:w},"Login or ",l.a.createElement(d.b,{to:"/"},"Register")),l.a.createElement("h2",{className:"has-text-black",style:w},l.a.createElement(d.b,{to:"/dashboard"},"Dashboard")),l.a.createElement("div",{className:"card"},l.a.createElement("form",{onSubmit:function(e){return S(e)}},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Email",name:"email",value:y,onChange:function(e){return O(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password",value:x,onChange:function(e){return O(e)},required:!0}))),l.a.createElement("input",{type:"submit",className:"button is-success"}))))},C=function(){return l.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},l.a.createElement("div",{className:"navbar-start"},l.a.createElement(d.b,{to:"/dashboard",className:"navbar-item"},"Dashboard"),l.a.createElement(d.b,{to:"/dashboard",className:"navbar-item"},"New Service Call"),l.a.createElement(d.b,{to:"/create-customer",className:"navbar-item"},"New Customer"),l.a.createElement(d.b,{to:"/dashboard",className:"navbar-item"},"All Customers"),l.a.createElement(d.b,{to:"/dashboard",className:"navbar-item"},"Look Up Customer"),l.a.createElement(d.b,{to:"/dashboard",className:"navbar-item"},"All Technicians")))},w=function(e){e.setActiveUser;var a=e.activeUser;e.getToken;return a?l.a.createElement(n.Fragment,null,l.a.createElement(C,null),l.a.createElement("h1",null,"Welcome back, ",console.log("Active user: "+a)," ",a?a.data.firstName:"<name>",".")):l.a.createElement("h1",null,"You must be logged in to do that")},O=function(e){var a=e.activeUser,t=e.getToken,r=Object(n.useState)({firstName:"",lastName:"",email:"",streetAddress:"",state:"",zipCode:"",homePhone:"",mobilePhone:"",workPhone:"",canText:!1,canEmail:!1,inCityLimits:!0,notes:""}),s=Object(v.a)(r,2),c=s[0],o=s[1],i=Object(n.useState)({toDashboard:!1}),m=Object(v.a)(i,2),u=m[0],d=m[1],h=u.toDashboard,g=c.firstName,y=c.lastName,x=c.email,w=c.streetAddress,O=c.state,S=c.zipCode,j=c.homePhone,T=c.mobilePhone,P=c.workPhone,A=c.canText,U=c.canEmail,q=c.inCityLimits,D=c.notes,L=function(e){o(Object(f.a)({},c,Object(N.a)({},e.target.name,e.target.value)))},z=function(){var e=Object(E.a)(b.a.mark(function e(a){var n,l,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=JSON.stringify({firstName:g,lastName:y,email:x,streetAddress:w,state:O,zipCode:S,homePhone:j,mobilePhone:T,workPhone:P,canText:A,canEmail:U,inCityLimits:q,notes:D}),e.prev=2,l=t()){e.next=7;break}return console.log("There is no token"),e.abrupt("return","There is no token");case 7:return r={headers:{"Content-Type":"application/json","x-auth-token":l}},e.next=10,k.a.post("/api/customers",n,r);case 10:e.sent,d({toDashboard:!0}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0.message);case 17:case"end":return e.stop()}},e,null,[[2,14]])}));return function(a){return e.apply(this,arguments)}}();return a?h?l.a.createElement(p.a,{to:"/dashboard"}):l.a.createElement(n.Fragment,null,l.a.createElement(C,null),l.a.createElement("div",{className:"card"},l.a.createElement("h1",null,"Create customer"),l.a.createElement("form",{onSubmit:function(e){return z(e)}},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"First Name"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"First Name",name:"firstName",value:g,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Last Name"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Last Name",name:"lastName",value:y,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"email",placeholder:"Email",name:"email",value:x,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Street Address"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Street Address",name:"streetAddress",value:w,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"State"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"State",name:"state",value:O,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Zip Code"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Zip Code",name:"zipCode",value:S,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Home Phone"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Home Phone",name:"homePhone",value:j,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Mobile Phone"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Mobile Phone",name:"mobilePhone",value:T,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Work Phone"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Work Phone",name:"workPhone",value:P,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Notes"),l.a.createElement("div",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"text",placeholder:"Notes",name:"notes",value:D,onChange:function(e){return L(e)},required:!0}))),l.a.createElement("input",{type:"submit",className:"button is-success"})))):l.a.createElement("h1",null,"You must be logged in to do that")},S=function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(i.a)(this,Object(m.a)(a).call(this))).state={activeUser:null,tokenStored:!1},e}return Object(u.a)(a,e),Object(o.a)(a,[{key:"storeToken",value:function(e){localStorage.setItem("token",e),this.setState({tokenStored:!0}),console.log("Token stored")}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"setActiveUser",value:function(e){this.setState({activeUser:e})}},{key:"render",value:function(){var e=this;return l.a.createElement(d.a,null,l.a.createElement("div",{className:"container"},l.a.createElement(p.b,{exact:!0,path:"/",render:function(a){return l.a.createElement(y,{storeToken:function(a){return e.storeToken(a)},setActiveUser:function(a){return e.setActiveUser(a)},getToken:function(){return e.getToken()}})}}),l.a.createElement(p.d,null,l.a.createElement(p.b,{exact:!0,path:"/login",render:function(a){return l.a.createElement(x,{storeToken:function(a){return e.storeToken(a)},setActiveUser:function(a){return e.setActiveUser(a)},getToken:function(){return e.getToken()}})}}),l.a.createElement(p.b,{exact:!0,path:"/dashboard",render:function(a){return l.a.createElement(w,{activeUser:e.state.activeUser,ifActiveUser:function(a){return e.ifActiveUser(a)}})}}),l.a.createElement(p.b,{exact:!0,path:"/create-customer",render:function(a){return l.a.createElement(O,{activeUser:e.state.activeUser,getToken:function(){return e.getToken()}})}}))))}}]),a}(n.Component);s.a.render(l.a.createElement(S,null),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.bf5d4de4.chunk.js.map